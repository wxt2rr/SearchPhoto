# 本地照片语义搜索工具 - 产品需求

## 1. 产品概述
开发一个纯前端的Web应用，运行在本地，通过自然语言或图片来搜索本地照片，解决mac相册中照片管理不便的问题。

## 2. 核心功能需求

### 2.1 文件夹处理与索引
- 用户访问网站后，可以选择需要处理的照片文件夹
- 系统对选中的文件夹进行扫描、分析并建立索引
- 生成的索引信息存储在本地（如localStorage或IndexedDB）
- 对于已处理的文件夹，系统记录其状态，避免重复处理
- 当文件夹内容发生变化（新增/删除文件）时，支持手动刷新，更新索引

### 2.2 语义搜索功能
- 支持自然语言搜索：用户输入描述（如"海边日落"、"家庭聚会"、"猫咪玩耍"等），返回匹配的照片
- 支持以图搜图：用户上传一张图片，系统返回视觉或主题相似的照片

### 2.3 已处理文件夹管理
- 列表展示已处理的文件夹及其状态
- 显示每个文件夹的最后处理时间
- 提供刷新单个文件夹的功能
- 提供删除索引的功能（用户可以清除某个文件夹的索引）

## 3. 用户使用流程
1. 用户打开Web应用
2. 选择一个或多个照片文件夹进行处理
3. 系统开始扫描和索引（显示进度）
4. 索引完成后，用户可以使用搜索功能
5. 用户可以通过自然语言或上传图片进行搜索
6. 系统返回匹配的照片结果
7. 用户可以管理已处理的文件夹（刷新、删除索引）

## 4. 技术考虑
- 纯前端实现，所有数据处理在本地进行
- 使用Web Workers处理耗时的图片分析任务
- 图片特征提取和语义理解可能需要借助预训练模型（如通过ONNX.js、TensorFlow.js等在浏览器中运行）
- 索引数据的存储方式需要考虑性能和浏览器限制

## 5. 拓展场景
- **时间轴视图**：按时间展示照片，支持时间范围搜索
- **地点聚类**：如果照片包含地理位置信息，按地点聚类展示
- **人物识别**：识别照片中的人物，支持按人物搜索
- **标签管理**：用户可以手动为照片添加标签，增强搜索能力
- **智能推荐**：基于用户的搜索历史，推荐相关照片
- **图片编辑**：简单的图片裁剪、旋转、滤镜功能
- **幻灯片播放**：搜索结果支持幻灯片播放模式
- **批量操作**：支持对搜索结果进行批量标记、删除等操作

## 6. 用户体验
- 响应式设计，支持桌面和移动设备
- 直观的界面，易于操作
- 搜索结果的快速加载和展示
- 清晰的文件夹处理状态指示
- 友好的错误提示和操作反馈

## 7. 性能与优化
- 首次处理可能耗时较长，需要提供进度指示
- 对大量图片进行索引时，考虑分批次处理
- 图片预览使用缩略图，提高页面加载速度
- 索引数据的增量更新，只处理新增或修改的文件

## 8. 隐私与安全
- 所有数据处理在本地进行，不上传任何数据到服务器
- 用户的照片文件仅在本地读取和分析
- 提供数据清除功能，用户可随时删除所有索引数据